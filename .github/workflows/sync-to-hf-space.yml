# .github/workflows/sync-to-hf-space.yml
name: Sync to Hugging Face Space

on:
  push:
    branches:
      - main # Or whatever your default branch is

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0 # Fetch all history for accurate diffs

      - name: Push to Hugging Face Space
        env:
          HF_TOKEN: ${{ secrets.HF_TOKEN }}
          # Your Hugging Face username
          HF_USERNAME: GuitarGeorge
          # The ID of your Space (username/space-name)
          SPACE_ID: GuitarGeorge/Neural-Prophet-Predictor
        run: |
          echo "Attempting to push to Hugging Face Space: $SPACE_ID"
          # Add Hugging Face as a remote
          git remote add hf_space "https://dummy:${HF_TOKEN}@huggingface.co/spaces/${SPACE_ID}"
          
          # Check if the remote was added
          git remote -v
          
          # Configure Git user
          git config --global user.email "action@github.com"
          git config --global user.name "GitHub Action"
          
          # Force push to ensure the Space mirrors GitHub
          git push --force hf_space HEAD:refs/heads/main
          
          echo "Push to Hugging Face Space completed."